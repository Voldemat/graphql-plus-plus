fragment BaseMessage on IMessage {
  id
  chatId
  createdAt
  updatedAt
  isEdited
  isIncoming
  hasBeenRead
}

fragment AppointmentMessage on AppointmentMessage {
  __typename

  service {
    ...Service
  }

  ...BaseMessage
}

fragment OrderMessage on OrderMessage {
  __typename

  product {
    ...Product
  }
  selectedProperties {
    key
    value
  }

  ...BaseMessage
}

fragment ForwardedContentMessage on ForwardedContentMessage {
  __typename

  content {
    __typename
    ... on Publication {
      ...Publication
    }
    ... on Service {
      ...Service
    }
    ... on Product {
      ...Product
    }
    ...on Article {
      ...Article
    }
    ... on Story {
      ...Story
    }
  }
  text

  ...BaseMessage
}

fragment RegularMessage on RegularMessage {
  __typename

  text
  attachments {
    ...Media
  }
  repliedMessageId

  ...BaseMessage
}

fragment Message on Message {
  ... on ForwardedContentMessage {
      ...ForwardedContentMessage
  }
  ... on RegularMessage {
      ...RegularMessage
  }
  ... on OrderMessage {
      ...OrderMessage
  }
  ... on AppointmentMessage {
      ...AppointmentMessage
  }
}

fragment MessageList on MessageList {
  total
  messages {
    ...Message
  }
}