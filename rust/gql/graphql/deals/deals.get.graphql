enum EDealColumnType {
    LIST
    NUMBER
    DATE
}

type DealColumn {
    id: UUID!
    name: String!
    type: EDealColumnType!
    availableValues: [String!]!
}

type DealEntry {
    columnName: String!
    value: Tag!
}

type StageToWorktypesMapEntry {
    stage: Tag!
    worktypes: [Tag!]!
}

type DealInfo {
    values: [DealEntry!]!
    stageToWorktypesMap: [StageToWorktypesMapEntry!]!
}

type FilesDealInfo {
    dealName: Tag!
    dealInfo: DealInfo!
    unsetColumns: [DealColumn!]!
}

type ErrorCantAddAutotags {
    a: Boolean
}

union FilesDealInfoOrError = FilesDealInfo | ErrorCantAddAutotags
union GetDealInfoResponse = DealInfo | ErrorNotFound

extend type Query {
    getDeals(skip: Int!, limit: Int!, query: String): [String!]! @authenticated
    getDealInfo(dealName: String!): GetDealInfoResponse! @authenticated
    getDealColumns: [DealColumn!]! @authenticated
    getFilesDealInfo(fileIds: [UUID!]!): FilesDealInfoOrError! @authenticated
}
